
# Docker CLI – Core Commands (Notes)


## Verifying Docker Installation
Used to confirm Docker is installed and running correctly.

```
$ docker --version     → shows Docker client version
$ docker version       → shows client + server versions
$ docker info          → detailed Docker system info
$ docker container run hello-world → test Docker setup
```

---

## Getting Help
$ docker help                  → general help
$ docker <command> help        → help for a specific command
$ Example: docker container help


## Searching Images on Docker Hub

Search public images available on Docker Hub.
$ docker search debian
$ docker search mongo


## Pulling Images
Download images from Docker Hub to local system.

$ docker image pull redis:5.0.10
$ docker image pull ubuntu:latest
$ docker image pull mysql   → defaults to :latest tag


## Listing Images
$ docker images        → old command
$ docker image ls      → recommended command


## Running Containers
Create and start containers from images.
$ docker container run -P httpd

Equivalent steps:

$ docker container create -P httpd
$ docker container start <container-id>


## Accessing Container Shell

$ docker container run -it centos
* `-i` → interactive
* `-t` → terminal
* Detach without stopping: `Ctrl + P + Q`

---

## Container Resource Usage
$ docker stats   → live CPU, memory, network usage


# Running Web Servers in Containers
$ docker container run -d -p 80:80   --name mysite1 nginx
$ docker container run -d -p 8080:80 --name mysite2 nginx
$ docker container run -d -p 8081:80 --name mysite3 nginx

### Options Explained
* `-d` → run in background
* `--name` → assign container name
* `-p X:Y` → map host port X → container port Y
* `-P` → map all exposed ports randomly

---

## Listing Containers
$ docker ps                 → running containers
$ docker container ls       → same (new syntax)
$ docker ps -a              → all containers
$ docker container ls -a    → all containers

Filter by status:
$ docker container ls -a -f status=exited


## Stopping & Removing Containers
$ docker container stop <id|name>
$ docker container rm <id|name>
$ docker container rm -f <id|name>   → force remove


Remove all stopped containers:
$ docker container rm $(docker container ls -f status=exited -q)

## Removing Images
$ docker rmi <image>        → old
$ docker image rm <image>   → recommended

Cleanup unused resources:
$ docker system prune
$ docker system prune -a    → remove unused images also


# Executing Commands in Containers
## Shell in Running Container
$ docker container exec -it <container> bash


## Run Single Command
$ docker container exec <container> cat /etc/shadow
$ docker container exec <container> yum -y install nmap

# Commit, Tag & Push Images
## Commit Container Changes to Image

1️⃣ Run container and modify it:

$ docker container run -it --name container1 centos


2️⃣ Create new image:
$ docker commit -m "change description" -a "Author" container1 repo/image:tag


Example:
$ docker commit -m "nmap installed" -a "Andrei D." container1 ddandrei/my_centos


3️⃣ Run container from new image:
$ docker container run -it ddandrei/my_centos


## Tagging Images
$ docker image tag nginx ddandrei/nginx:custom
$ docker image tag ddandrei/my_centos:latest ddandrei/my_centos:1.0


## Pushing Images to Docker Hub
$ docker login
$ docker image push ddandrei/nginx:custom

> Repository name must match Docker Hub username.

# Docker Volumes – Persistent Data

## Managing Volumes
$ docker volume create mysite
$ docker volume ls
$ docker volume inspect mysite
$ docker volume rm mysite
$ docker volume prune

## Running Container with Volume
$ docker container run -d --name mywebapp -p 80:80 \
-v mysite:/usr/share/nginx/html nginx

* Volume stores data **outside container lifecycle**
* Data persists after container deletion

## Key Takeaways
* Dockerfile → builds image
* Image → runs container
* Containers are ephemeral
* Volumes provide persistence
* CLI commands manage full container lifecycle
